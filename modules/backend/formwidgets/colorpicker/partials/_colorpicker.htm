<?php if ($this->previewMode): ?>
    <div class="form-control"><?= e($value) ?></div>
<?php else: ?>
    <div
        id="<?= $this->getId() ?>"
        class="field-colorpicker <?php if($readOnly || $disabled): ?>disabled<?php endif; ?>"
        data-control="colorpicker"
        data-formats="<?= e(json_encode($formats)) ?>"
        data-available-colors="<?= e(json_encode($availableColors)) ?>"
        <?php if ($showAlpha): ?>data-show-alpha="<?= $showAlpha ?>"<?php endif ?>
        <?php if ($allowEmpty): ?>data-allow-empty="<?= $allowEmpty ?>"<?php endif ?>
        <?php if ($allowCustom): ?>data-allow-custom="<?= $allowCustom ?>"<?php endif ?>
        data-data-locker="#<?= $this->getId('input') ?>"
        <?php if ($readOnly || $disabled): ?>data-disabled="true"<?php endif; ?>
        <?= $this->formField->getAttributes() ?>>

        <div class="colorpicker-container">
            <input
                data-color-value
                class="form-control"
                placeholder="No color"
                value="<?= $value ?>"
                <?php if ($disabled): ?> disabled<?php endif ?>
                <?php if ($readOnly || !$allowCustom): ?> readonly<?php endif ?>
            >
            <div
                data-color-preview
            ></div>
        </div>

        <input
            type="hidden"
            id="<?= $this->getId('input') ?>"
            name="<?= $name ?>"
            value="<?= e($value) ?>" />
    </div>

<?php endif ?>
